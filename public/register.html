<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - LGU Employee Portal</title>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/auth.js" defer></script>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md">
        <div class="text-center">
            <img src="LGU-DAET LOGO.png" alt="LGU Logo" class="mx-auto h-20 w-20 rounded-full">
            <h2 class="mt-4 text-2xl font-bold text-gray-800">Create a New Account</h2>
            <p class="text-gray-600">LGU Employee Portal</p>
        </div>
        
        <!-- Registration Form -->
        <form id="register-form" class="mt-6 space-y-3">
            <div>
                <label for="register-employmentType" class="text-sm font-medium text-gray-700">Employment Type</label>
                <select id="register-employmentType" name="employmentType" required class="w-full px-3 py-2 mt-1 border rounded-md">
                    <option value="Permanent">Permanent</option>
                    <option value="Job Order">Job Order</option>
                </select>
            </div>
            <div>
                <label for="register-employeeId" class="text-sm font-medium text-gray-700">Employee ID</label>
                <input id="register-employeeId" name="employeeId" type="text" required class="w-full px-3 py-2 mt-1 border rounded-md">
            </div>
             <div>
                <label for="register-name" class="text-sm font-medium text-gray-700">Full Name</label>
                <input id="register-name" name="name" type="text" required class="w-full px-3 py-2 mt-1 border rounded-md">
            </div>
            <div>
                <label for="register-email" class="text-sm font-medium text-gray-700">Email Address</label>
                <input id="register-email" name="email" type="email" required placeholder="name@lgu.gov.ph" class="w-full px-3 py-2 mt-1 border rounded-md">
            </div>
            <div>
                <label for="register-office" class="text-sm font-medium text-gray-700">Office / Department</label>
                <select id="register-office" name="office" required class="w-full px-3 py-2 mt-1 border rounded-md">
                    <option value="">Loading Offices...</option>
                </select>
            </div>
            <div>
                <label for="register-role" class="text-sm font-medium text-gray-700">Role</label>
                <select id="register-role" name="role" required class="w-full px-3 py-2 mt-1 border rounded-md">
                    <option value="Employee">Employee</option>
                    <option value="Department Head">Department Head</option>
                </select>
            </div>
            <div>
                <label for="register-password" class="text-sm font-medium text-gray-700">Password</label>
                <div class="relative mt-1">
                    <input id="register-password" name="password" type="password" required class="w-full px-3 py-2 border rounded-md pr-10">
                    <button type="button" id="register-toggle-password" class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700 focus:outline-none">
                        <!-- Eye icon -->
                        <svg id="register-eye-icon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639l4.443-5.553a1.012 1.012 0 0 1 1.59 0l4.443 5.553a1.012 1.012 0 0 1 0 .639l-4.443 5.553a1.012 1.012 0 0 1-1.59 0l-4.443-5.553Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>
                        <!-- Eye-slash icon (hidden by default) -->
                        <svg id="register-eye-slash-icon" class="h-5 w-5 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.243 4.243L6.228 6.228" />
                        </svg>
                    </button>
                </div>
            </div>
            <div>
                <label for="register-confirm-password" class="text-sm font-medium text-gray-700">Confirm Password</label>
                <div class="relative mt-1">
                    <input id="register-confirm-password" name="confirmPassword" type="password" required class="w-full px-3 py-2 border rounded-md pr-10">
                    <button type="button" id="register-toggle-confirm-password" class="absolute inset-y-0 right-0 flex items-center px-3 text-gray-500 hover:text-gray-700 focus:outline-none">
                        <!-- Eye icon -->
                        <svg id="register-confirm-eye-icon" class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.036 12.322a1.012 1.012 0 0 1 0-.639l4.443-5.553a1.012 1.012 0 0 1 1.59 0l4.443 5.553a1.012 1.012 0 0 1 0 .639l-4.443 5.553a1.012 1.012 0 0 1-1.59 0l-4.443-5.553Z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
                        </svg>
                        <!-- Eye-slash icon (hidden by default) -->
                        <svg id="register-confirm-eye-slash-icon" class="h-5 w-5 hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.243 4.243L6.228 6.228" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Data Privacy Consent -->
            <div class="space-y-3 rounded-md border border-gray-200 bg-gray-50 p-4">
                <h4 class="text-sm font-semibold text-gray-800">Data Privacy Consent</h4>
                <p class="text-xs text-gray-600">
                    The information you provide will be used solely for the purpose of creating and managing your account within the LGU DAET employee portal. This data will be shared across our integrated systems (like HR, GSOMS, and other company platforms) to ensure seamless service and accurate records related to your employment.
                </p>
                <div class="relative flex items-start">
                    <div class="flex h-6 items-center">
                        <input id="privacy-consent" name="privacy-consent" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-sky-600 focus:ring-sky-500">
                    </div>
                    <div class="ml-3 text-sm leading-6">
                        <label for="privacy-consent" class="font-medium text-gray-900">I have read, understood, and agree to the LGU Daet Privacy Policy and consent to the processing of my personal data as described.</label>
                    </div>
                </div>
            </div>

            <p id="register-message" class="text-sm"></p>
            <div>
                <button type="submit" class="w-full flex justify-center items-center px-4 py-2 font-medium text-white bg-sky-600 rounded-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors duration-200">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white hidden" id="register-spinner" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    <span id="register-button-text">Register Account</span>
                </button>
            </div>
        </form>
         <p class="mt-6 text-sm text-center text-gray-600">
            Already have an account? 
            <a href="index.html" class="font-medium text-sky-600 hover:underline transition-colors duration-200">Sign In</a>
        </p>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50 transition-opacity">
        <div class="w-full max-w-sm rounded-lg bg-white p-6 text-center shadow-xl transform transition-all">
            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100">
                <!-- Heroicon - Check -->
                <svg class="h-6 w-6 text-green-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                </svg>
            </div>
            <div class="mt-3">
                <h3 class="text-lg font-medium leading-6 text-gray-900">Registration Successful!</h3>
                <div class="mt-2">
                    <p class="text-sm text-gray-500">
                        Your account has been created. You can now proceed to the login page.
                    </p>
                </div>
            </div>
            <div class="mt-5 sm:mt-6">
                <a href="index.html" id="success-modal-login-btn" class="inline-flex w-full justify-center rounded-md bg-sky-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-sky-700 sm:text-sm">
                    Proceed to Login
                </a>
            </div>
        </div>
    </div>

    <!-- Error Modal (for API errors) -->
    <div id="error-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50 transition-opacity">
        <div class="w-full max-w-sm rounded-lg bg-white p-6 text-center shadow-xl transform transition-all">
            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-red-100">
                <!-- Heroicon - Exclamation Triangle -->
                <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126z" />
                </svg>
            </div>
            <div class="mt-3">
                <h3 id="error-modal-title" class="text-lg font-medium leading-6 text-gray-900">Registration Failed</h3>
                <div class="mt-2">
                    <p id="error-modal-message" class="text-sm text-gray-500"></p>
                </div>
            </div>
            <div class="mt-5 sm:mt-6">
                <button id="error-modal-close-btn" type="button" class="inline-flex w-full justify-center rounded-md bg-sky-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-sky-700 sm:text-sm">
                    Close
                </button>
            </div>
        </div>
    </div>
</body>
</html>
